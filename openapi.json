{
  "openapi": "3.0.3",
  "info": {
    "title": "FamilyPoints - OpenAPI 3.0",
    "description": "Documentacion de la aplicaion FamilyPoints. Una aplicación para gestionar el intercambio de favores entre miembros de la misma familia (quedarse una noche con los niños, cocinar para toda la semana, etc.), qué se acumularán como puntos canjeables por actividades lúdicas (noche libre con amigos, spa, tarde de videojuegos, etc.). \n\n `Trabajo Final de Grado, Universidad de Alicante 2023-24.` \n\n`Autor: Robert Kazaryan.`",
    "version": "2.0.0",
    "license": {
      "name": "MIT License",
      "url": "https://github.com/RK181/FamilyPoints-TFG-2023-24/blob/master/LICENSE"
    }
  },
  "externalDocs": {
    "description": "Proyecto en GitHub",
    "url": "https://github.com/RK181/FamilyPoints-TFG-2023-24"
  },
  "servers": [
    {
      "url": "http://localhost:8000/api"
    }
  ],
  "tags": [
    {
      "name": "auth",
      "description": "Recurso de auteticacion del usuario"
    },
    {
      "name": "group",
      "description": "Recurso de grupo de la pareja"
    },
    {
      "name": "reward",
      "description": "Recurso de recompensas de la pareja dentro del grupo"
    },
    {
      "name": "task",
      "description": "Recurso de tareas de la pareja dentro del grupo"
    }
  ],
  "paths": {
    "/auth/signup": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Registrar un usuario",
        "description": "Crea un usuario en el sistema y envia un correo electronico de confirmacion al email proporcionado. Para registrar al usuario definitivamente es imprescindible confirmar el correo electronico.",
        "operationId": "signupUser",
        "requestBody": {
          "$ref": "#/components/requestBodies/UserSignUp"
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion, se ha enviado un correo electronico al email proporcionado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Iniciar sesion",
        "description": "Un usuario registrado inicia la sesion. El usuario debe de haber verificado su email.",
        "operationId": "loginUser",
        "requestBody": {
          "$ref": "#/components/requestBodies/UserLogin"
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Credenciales no son validos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Terminar sesion",
        "description": "Cierra todas las sesiones del usuario",
        "operationId": "logoutUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/group": {
      "post": {
        "tags": [
          "group"
        ],
        "summary": "Crear el grupo",
        "description": "Crea un grupo de dos usuarios. Cada usuario solo puede pertenecer a un grupo",
        "operationId": "createGroup",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/CreateGroup"
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "group"
        ],
        "summary": "Obtener los datos del grupo",
        "description": "Se obtiene informacion del grupo mediante el token de sesion del JWT del usuario",
        "operationId": "getGroup",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del grupo y sus participantes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrade el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "group"
        ],
        "summary": "Modificar los datos del grupo",
        "description": "Modifica los datos del grupo, los campos a modificar se elegen de manera opcional",
        "operationId": "updateGroup",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Cuerpo de peticion",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Group"
              },
              "example": {
                "name": "Pepe y Clara",
                "points_name": "cocos",
                "points_icon": "1",
                "conf_t_approve": false,
                "conf_t_validate": false,
                "conf_t_invalidate": false,
                "conf_r_valiadte": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "group"
        ],
        "summary": "Borrar el grupo",
        "description": "Borra el grupo mediante el token de sesion JWT del usuario",
        "operationId": "deleteGroup",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrade el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/group/invitation/{email}": {
      "get": {
        "tags": [
          "group"
        ],
        "summary": "Invitar a la pareja al grupo",
        "description": "Se manda un correo electronico con la invitacion para unirse al grupo",
        "operationId": "inviteToGroup",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "email",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "Correo electronico del usuario a invitar al grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Respuesta del exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado o no verificado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reward": {
      "post": {
        "tags": [
          "reward"
        ],
        "summary": "Crear una recompensa dentro del grupo",
        "description": "Crea una recompensa dentro del grupo en el que se encuentra el usuario",
        "operationId": "createReward",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Cuerpo de peticion",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Reward"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reward/{id}": {
      "get": {
        "tags": [
          "reward"
        ],
        "summary": "Obtener los datos de una recompensa del grupo",
        "description": "Se obtiene informacion de una recompensa del grupo mediante su ID",
        "operationId": "getRewardById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la recompensa"
          }
        ],
        "responses": {
          "200": {
            "description": "Datos de una recompensa del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Reward"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la recompensa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "reward"
        ],
        "summary": "Modifica una recompensa dentro del grupo",
        "description": "Modifica una recompensa dentro del grupo en el que se encuentra el usuario",
        "operationId": "updateReward",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la recompensa"
          }
        ],
        "requestBody": {
          "description": "Cuerpo de peticion",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Reward"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la recompensa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "reward"
        ],
        "summary": "Borrar una recompensa del grupo",
        "description": "Borra una recompensa del brupo mediante su ID",
        "operationId": "deleteRewardById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la recompensa a borrar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la recompensa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reward/redeem/{id}": {
      "patch": {
        "tags": [
          "reward"
        ],
        "summary": "Canjear una recompensa del grupo",
        "description": "Canjear una recompensa, que ha creado, del grupo, en el que se encuentra el usuario, con los puntos ganatos por la completacion de tareas. Puede tener valor negativo y para completar el canjeo se debe validar por la pareja, al menos que no se diga lo contrario en los ajustes del grupo",
        "operationId": "redeemReward",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la recompensa a canjear"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la recompensa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reward/validate/{id}": {
      "patch": {
        "tags": [
          "reward"
        ],
        "summary": "Validar el canjeo de una recompensa",
        "description": "Validar el canjeo de una recompensa, se debe hacer por el usuario distinto al creador, al menos que no se diga lo contrario en los ajustes del grupo",
        "operationId": "validateReward",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "Numeric ID of the reward to validate"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada, depende de los ajustes del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la recompensa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/group/reward": {
      "get": {
        "tags": [
          "reward"
        ],
        "summary": "Obtener el listado de las recompensas del grupo",
        "description": "Obtiene el listado de todas las recompensas del grupo",
        "operationId": "getGroupRewardList",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de recompensas del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Reward"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task": {
      "post": {
        "tags": [
          "task"
        ],
        "summary": "Crear una tarea dentro del grupo",
        "description": "Crear una tarea dentro del grupo en el que se encuentra el usuario",
        "operationId": "createTask",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Cuerpo de peticion",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Task"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task/{id}": {
      "get": {
        "tags": [
          "task"
        ],
        "summary": "Obtener los datos de una tarea del grupo",
        "description": "Se obtiene informacion de una tarea del grupo mediante su ID",
        "operationId": "getTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea a obtener"
          }
        ],
        "responses": {
          "200": {
            "description": "Datos de una tarea del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "task"
        ],
        "summary": "Modificar los datos de una tarea del grupo",
        "description": "Modificar los datos de una tarea dentro del grupo en el que se encuentra el usuario",
        "operationId": "updateTask",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea a obtener"
          }
        ],
        "requestBody": {
          "description": "Cuerpo de peticion",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Task"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error de validacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "task"
        ],
        "summary": "Borrar una tarea del grupo",
        "description": "Borra una tarea del grupo mediante su ID",
        "operationId": "deleteTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea a borrar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task/approve/{id}": {
      "patch": {
        "tags": [
          "task"
        ],
        "summary": "Aprueba la creacion de una tarea del grupo",
        "description": "Aprueba la creacion de una tarea del grupo, se debe hacer por la pareja del usuario creador de la tarea, al menos que no se diga lo contrario en los ajustes del grupo",
        "operationId": "approveTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea a aprobar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada, depende de los ajustes del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task/complete/{id}": {
      "patch": {
        "tags": [
          "task"
        ],
        "summary": "Completar una tarea del grupo",
        "description": "Completa una tarea (aprobada) del grupo. Para recibir los puntos, el usuario debe esperar la validacion, al menos que no se diga lo contrario en los ajustes del grupo",
        "operationId": "completeTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea a completar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada, depende de los ajustes del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task/validate/{id}": {
      "patch": {
        "tags": [
          "task"
        ],
        "summary": "Valida la completacion de una tarea del grupo",
        "description": "Valida la completacion de una tarea (completada) del grupo, para que el usuario pueda recibir sus puntos. La validacion se hace por el usuario distinto al quien haya completado la tarea, al menos que no se diga lo contrario en los ajustes del grupo",
        "operationId": "validateTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea completada a validar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada, depende de los ajustes del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/task/invalidate/{id}": {
      "patch": {
        "tags": [
          "task"
        ],
        "summary": "Invalidar la completacion de una tarea del grupo",
        "description": "Invalidar la completacion de una tarea del grupo, debe ser permitida en los ajustes del grupo. Lo pueden hacer todos los mienmbos del grupo",
        "operationId": "inValidateTaskById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "integer"
            },
            "required": true,
            "description": "ID de la tarea completada y validada a invalidar"
          }
        ],
        "responses": {
          "200": {
            "description": "Exito de la operacion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "403": {
            "description": "Operacion no autorizada, depende de los ajustes del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo o la tarea",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/group/task": {
      "get": {
        "tags": [
          "task"
        ],
        "summary": "Obtener el listado de tares del grupo",
        "description": "Obtiene el listado de todas las tareas del grupo",
        "operationId": "getGroupTaskList",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lostado de las tareas del grupo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Task"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Usuario no autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "No se ha encontrado el grupo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Pepe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "pepe@email.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "12345",
            "writeOnly": true
          },
          "points": {
            "type": "integer",
            "example": "0",
            "readOnly": true
          }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Pepe y Clara"
          },
          "points_name": {
            "type": "string",
            "example": "cocos"
          },
          "points_icon": {
            "type": "string",
            "example": "1"
          },
          "conf_t_approve": {
            "type": "boolean",
            "example": true
          },
          "conf_t_validate": {
            "type": "boolean",
            "example": true
          },
          "conf_t_invalidate": {
            "type": "boolean",
            "example": true
          },
          "conf_r_valiadte": {
            "type": "boolean",
            "example": true
          },
          "creator": {
            "allOf": [
              {
                "$ref": "#/components/schemas/User"
              },
              {
                "readOnly": true
              },
              {
                "description": "El creador del grupo"
              }
            ]
          },
          "couple": {
            "allOf": [
              {
                "$ref": "#/components/schemas/User"
              },
              {
                "description": "La pareja"
              }
            ]
          }
        }
      },
      "Reward": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "example": 10,
            "readOnly": true
          },
          "title": {
            "type": "string",
            "example": "Salir con amigos"
          },
          "description": {
            "type": "string",
            "example": "Salir con amigos toda la tarde"
          },
          "cost": {
            "type": "integer",
            "example": "100"
          },
          "expire_at": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "example": "01/01/2025"
          },
          "redeem": {
            "type": "boolean",
            "example": false,
            "readOnly": true
          },
          "validate": {
            "type": "boolean",
            "example": false,
            "readOnly": true
          },
          "user": {
            "allOf": [
              {
                "$ref": "#/components/schemas/User"
              },
              {
                "readOnly": true
              },
              {
                "description": "El creador de la recompensa y el quien lo va a canjear"
              }
            ]
          }
        }
      },
      "Task": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "example": 10,
            "readOnly": true
          },
          "title": {
            "type": "string",
            "example": "Pasear al perro"
          },
          "description": {
            "type": "string",
            "example": "Pasear al perro por la tarde"
          },
          "reward": {
            "type": "integer",
            "example": "50"
          },
          "expire_at": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "example": "01/01/2025"
          },
          "approve": {
            "type": "boolean",
            "example": false,
            "readOnly": true
          },
          "complete": {
            "type": "boolean",
            "example": false,
            "readOnly": true
          },
          "validate": {
            "type": "boolean",
            "example": false,
            "readOnly": true
          },
          "creator": {
            "allOf": [
              {
                "$ref": "#/components/schemas/User"
              },
              {
                "readOnly": true
              },
              {
                "description": "El creador de la tarea"
              }
            ]
          },
          "user": {
            "allOf": [
              {
                "$ref": "#/components/schemas/User"
              },
              {
                "readOnly": true
              },
              {
                "description": "El usuario que ha completado la tarea"
              }
            ]
          }
        }
      },
      "ApiResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "token": {
            "type": "string"
          }
        }
      },
      "ValidationErrorResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "errors": {
            "type": "object",
            "properties": {
              "name": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "email": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "password": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "points_name": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "points_icon": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "title": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "description": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "cost": {
                "type": "array",
                "items": {
                  "type": "integer"
                }
              },
              "reward": {
                "type": "array",
                "items": {
                  "type": "integer"
                }
              }
            }
          }
        }
      }
    },
    "requestBodies": {
      "User": {
        "description": "Usuario para registrar",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/User"
            }
          }
        }
      },
      "UserSignUp": {
        "description": "Cuerpo de peticion para registrar nuevo usuario",
        "content": {
          "application/json": {
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/User"
                },
                {
                  "required": [
                    "name",
                    "email",
                    "password"
                  ]
                }
              ]
            },
            "example": {
              "name": "Pepe",
              "email": "pepe@email.com",
              "password": "12345"
            }
          }
        }
      },
      "UserLogin": {
        "description": "Cuerpo de peticion para iniciar la sesion",
        "content": {
          "application/json": {
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/User"
                },
                {
                  "required": [
                    "email",
                    "password"
                  ]
                }
              ]
            },
            "example": {
              "email": "pepe@email.com",
              "password": "12345"
            }
          }
        }
      },
      "CreateGroup": {
        "description": "Cuerpo de peticion para crear nuevo grupo",
        "content": {
          "application/json": {
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/Group"
                },
                {
                  "required": [
                    "name",
                    "points_name",
                    "points_icon",
                    "conf_t_approve",
                    "conf_t_validate",
                    "conf_t_invalidate",
                    "conf_r_valiadte"
                  ]
                }
              ]
            },
            "example": {
              "name": "Pepe y Clara",
              "points_name": "cocos",
              "points_icon": "1",
              "conf_t_approve": true,
              "conf_t_validate": true,
              "conf_t_invalidate": true,
              "conf_r_valiadte": true
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}